<head>
    <meta charset="utf-8">
    <title>EtherPlan</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
    <script type="text/javascript" src="app.js"></script>
</head>
<body >{{> table}}</body>

<template name="table">
    {{#if noDoc}} 
        <div id="inner">
            <div id="newPlan" onclick="EtherPlan.Helper.go_random()">New Plan</div>
            <br /><br />
            or create/open a plan with the name
            <form action="#" id="formCreate" onsubmit="EtherPlan.Helper.go_name();return false;"> 
                <input type="text" id="planName"> 
                <button type="submit" id="ok">OK</button>
            </form>
        </div>
    {{else}} 
    <table id="parts" class="unselectable">
        <thead>
            <tr>
                <th id="headerOrder">ID</th>
                <th>PART</th>
                <th id="headerStart">START</th>
                <th id="headerValue">Î”</th>
            </tr>
        </thead>
        <tbody class="sortable">
            {{#if noParts}} 
                {{> entryNew}} 
            {{/if}} 

            {{#each parts}} 
                {{> part}}
            {{/each}}
        </tbody>
    </table>
    <div id="buttonBar" >&nbsp;</div>
    {{/if}} 
    <div id="banner" class="unselectable"><span id="banner-ether">Ether</span><span id="banner-gantt">Plan</span></div>
    {{#if hasDoc}} 
        {{#if hasParts}} 
            <span class="unselectable">
                <span id="iconActionPlusDefault" class="icon">&nbsp;</span>
                <span id="iconMinus" class="icon">&nbsp;</span>
                <span id="iconArrowLeft" class="icon">&nbsp;</span>
                <span id="iconArrowDown" class="icon">&nbsp;</span>
                <span id="iconArrowUp" class="icon">&nbsp;</span>
                <span id="iconArrowRight" class="icon">&nbsp;</span>
                <span id="iconCheck" class="icon">&nbsp;</span>
                <span id="iconX" class="icon">&nbsp;</span>
            </span>
        {{/if}} 
    {{/if}} 
</template>

<template name="part">
    {{#if editing}} 
        {{> edit}} 
    {{else}} 
        {{> show}} 
    {{/if}}
    {{#if adding}}
        {{> entry}}
    {{/if}}
</template>

<template name="show">
    <tr class="{{#if isGroup}} isGroup{{/if}}">
        <td class="order showOrder">{{ order }}</td>
        <td class="showLabel">{{ spaceLabel this }}{{ label }}</td>
        <td class="start showStart">{{ start }}</td>
        <td class="value showValue">{{ value }}</td>
    </tr>
</template>

<template name="edit">
    <tr{{#if isGroup}} class="isGroup" {{/if}}>
        <td class="order">{{ order }}</td>
        <td>{{ spaceLabel this }}<input type="text" size="15" id="editLabel" value="{{ label }}" />
            <span id="iconActionMinus" class="icon">&nbsp;</span>
            {{#if hasParent}}
                <span id="iconActionPlus" class="icon">&nbsp;</span>
            {{else}}
                <span id="iconActionPlusPlus" class="icon">&nbsp;</span>
            {{/if}}
            {{#if couldInline}}<span id="iconActionArrowLeft" class="icon">&nbsp;</span>{{/if}}
            {{#if couldUp}}<span id="iconActionArrowUp" class="icon">&nbsp;</span>{{/if}}
            {{#if couldDown}}<span id="iconActionArrowDown" class="icon">&nbsp;</span>{{/if}}
            {{#if couldOutline}}<span id="iconActionArrowRight" class="icon">&nbsp;</span>{{/if}}
            <span id="iconActionCheck" class="icon">&nbsp;</span>
            <span id="iconActionX" class="icon">&nbsp;</span>{{#if showOptions}}<button id="hideOptions">less</button>{{else}}<button id="showOptions">more</button>{{/if}}
        </td>
        <td class="start"><input type="text" size="7" id="editStart" value="{{ start }}" onchange="EtherPlan.Helper.edit_update_finish()" /></td>
        <td class="value"><input type="text" size="2" id="editValue" value="{{ value }}" onchange="EtherPlan.Helper.edit_update_finish()" /></td>
    </tr>
    {{#if showOptions}}
    <tr>
        <td class="order">&nbsp;</td>
        <td colspan="3">{{ spaceLabel this }}
            
            <span id="finish">Finish:<input type="text" size="10" id="editFinish" value="{{ finish }}" onchange="EtherPlan.Helper.edit_update_value()" /></span>
            {{#if couldPredecessors}}
            Predecessors: 
            <input type="text" size="20" id="editPredecessors" value="{{ predecessors }}" />
            {{else}}
            <input type="hidden" id="editPredecessors" value="{{ predecessors }}" />
            {{/if}}
            {{#if couldMoveTo}}<button id="moveTo">Move to:</button> <input type="text" size="2" id="newOrder" />{{/if}}
            {{#if showDebug}}<button id="hideDebug">Hide Debug</button>{{else}}<button id="showDebug">Show Debug</button>{{/if}}
        </td>
    </tr>
    {{else}}
            <input type="hidden" id="editFinish" value="{{ finish }}" onchange="EtherPlan.Helper.edit_update_value()" />
            <input type="hidden" id="editPredecessors" value="{{ predecessors }}" />
    {{/if}}
    {{#if showDebug}}
    <tr>
        <td class="order">&nbsp;</td>
        <td colspan="5">
            <small>
            <ol>
                <li>id: {{_id}}</li>
                <li>level: {{level}}</li>
                <li>order: {{order}}</li>
                <li>parent: {{parent}}</li>
                <li>predecessors: {{predecessors}}</li>
                <li>start: {{start}}</li>
                <li>finish: {{finish}}</li>
                <li>timestampCreated: {{timestampCreated}}</li> 
                <li>timestampUpdated: {{timestampUpdated}}</li> 
            </ol>
            </small>
        </td>
    </tr>
    {{/if}}
</template>

<template name="entry">
    <tr>
        <td class="order">&nbsp;</td>
        <td>{{ spaceLabelEntry this }}<input type="text" size="15" id="entryLabel" value="Part {{ sizeTable }}" />
            <input type="hidden" id="entryFinish" value="{{finish}}" onchange="EtherPlan.Helper.entry_update_value()" />
            <input type="hidden" id="entryParent" value="{{ _id }}" />
            <input type="hidden" size="2" id="entryPredecessors" value="{{ predecessors }}" />
            <span id="iconActionCheckEntry" class="icon">&nbsp;</span>
            <span id="iconActionXEntry" class="icon">&nbsp;</span>
        </td>
        <td class="start"><input type="text" size="7" id="entryStart" value="{{start}}" onchange="EtherPlan.Helper.entry_update_finish()" /></td>
        <td class="value"><input type="text" size="2" id="entryValue" value="1" onchange="EtherPlan.Helper.entry_update_finish()" /></td>
    </tr>
</template>

<template name="entryNew">
    <tr>
        <td class="order">&nbsp;</td>
        <td colspan="3"><input type="text"  size="15" id="entryLabel" value="WHOLE" />
            <input type="hidden" id="entryValue" value="0" />
            <input type="hidden" id="entryParent" value="" />
            <input type="hidden" id="entryStart" value="{{start}}" />
            <input type="hidden" id="entryFinish" value="{{finish}}" />
            <span id="iconActionCheck" class="icon">&nbsp;</span>
        </td>
    </tr>
</template>